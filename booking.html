<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Cloud 7 | Book Session</title>

<link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;600;700&display=swap" rel="stylesheet">

<style>
    body {
        margin: 0;
        font-family: 'Inter', sans-serif;
        background: #f7f9ff;
    }

    /* NAVBAR */
    nav {
        background: white;
        padding: 15px 25px;
        display: flex;
        justify-content: space-between;
        align-items: center;
        box-shadow: 0 4px 15px rgba(0,0,0,0.05);
        position: sticky;
        top: 0;
        z-index: 20;
    }
    nav .logo {
        font-weight: 700;
        font-size: 20px;
        color: #5a71d8;
    }
    nav a {
        margin: 0 12px;
        text-decoration: none;
        color: #333;
        font-weight: 500;
        transition: 0.2s;
    }
    nav a:hover {
        color: #8797f0;
    }

    /* HERO */
    .hero {
        background: linear-gradient(135deg, #a8c0ff, #d8baff);
        color: white;
        padding: 70px 20px;
        text-align: center;
    }
    .hero h1 {
        margin: 0;
        font-size: 42px;
    }
    .hero p {
        margin-top: 10px;
        font-size: 18px;
        opacity: 0.95;
    }

    /* Layout */
    .container {
        max-width: 1100px;
        padding: 0 20px;
        margin: 40px auto;
    }

    .btn {
        background: #a8c0ff;
        color: white;
        padding: 12px 20px;
        border: none;
        border-radius: 12px;
        cursor: pointer;
        font-weight: 600;
        transition: 0.2s;
    }
    .btn:hover {
        background: #8daeff;
    }

    /* Stats Grid */
    .stats-grid {
        display: grid;
        grid-template-columns: repeat(auto-fit, minmax(230px, 1fr));
        gap: 20px;
        margin-top: 30px;
    }
    .stat-card {
        background: white;
        padding: 20px;
        border-radius: 16px;
        box-shadow: 0 4px 10px rgba(0,0,0,0.06);
        text-align: center;
        border-left: 6px solid #a8c0ff;
    }
    .stat-number {
        font-size: 32px;
        font-weight: 700;
        color: #5b6de0;
    }

    /* Appointment Cards */
    .appointment-card {
        background: white;
        padding: 20px;
        border-radius: 16px;
        margin-bottom: 15px;
        box-shadow: 0 4px 10px rgba(0,0,0,0.06);
    }
    .appt-date {
        font-weight: 700;
        font-size: 17px;
    }
    .appt-type {
        color: #5b6de0;
        font-weight: 600;
        margin-top: 5px;
    }
    .status-upcoming {
        color: #40a578;
        font-weight: 700;
    }
    .status-completed {
        color: #c44;
        font-weight: 700;
    }

    /* Empty State */
    .empty {
        text-align: center;
        color: #777;
        margin-top: 30px;
        font-size: 17px;
    }

    /* Modal */
    #modalBackground {
        position: fixed;
        inset: 0;
        background: rgba(0,0,0,0.4);
        display: none;
        justify-content: center;
        align-items: center;
        z-index: 40;
    }
    #modal {
        background: white;
        width: 90%;
        max-width: 450px;
        padding: 25px;
        border-radius: 18px;
        box-shadow: 0 8px 20px rgba(0,0,0,0.2);
        animation: pop 0.25s ease;
    }
    @keyframes pop {
        from { transform: scale(0.9); opacity: 0; }
        to { transform: scale(1); opacity: 1; }
    }

    select, input {
        width: 100%;
        padding: 12px;
        margin-top: 10px;
        border-radius: 12px;
        border: 1px solid #ccc;
        font-size: 15px;
    }

</style>
</head>

<body>

<!-- NAVBAR -->
<nav>
    <div class="logo">Cloud 7</div>
    <div>
        <a href="index.html">Home</a>
        <a href="about.html">About Us</a>
        <a href="services.html">Services</a>
        <a href="moodtracking.html">Mood Tracking</a>
        <a href="journal.html">Journal</a>
        <a href="book.html"><b>Book Session</b></a>
        <a href="resources.html">Resources</a>
        <a href="contact.html">Contact</a>
    </div>
</nav>

<!-- HERO -->
<section class="hero">
    <h1>Book a Session</h1>
    <p>Connect with licensed mental health professionals</p>
</section>

<div class="container">

    <button class="btn" onclick="openModal()">+ New Appointment</button>

    <!-- Stats -->
    <div class="stats-grid">
        <div class="stat-card">
            <h3>Total Sessions</h3>
            <div class="stat-number" id="totalSessions">0</div>
        </div>
        <div class="stat-card">
            <h3>Upcoming</h3>
            <div class="stat-number" id="upcomingSessions">0</div>
        </div>
        <div class="stat-card">
            <h3>Completed</h3>
            <div class="stat-number" id="completedSessions">0</div>
        </div>
    </div>

    <!-- Appointment List -->
    <div id="appointmentsList" class="appointments"></div>

</div>

<!-- Empty State -->
<div id="emptyState" class="empty" style="display:none;">
    <p>No appointments yet<br><br>Schedule your first session to get started</p>
    <button class="btn" onclick="openModal()">Book Your First Session</button>
</div>

<!-- MODAL -->
<div id="modalBackground">
    <div id="modal">
        <h2>New Appointment</h2>

        <label>Professional Type</label>
        <select id="proType">
            <option>Therapist</option>
            <option>Counselor</option>
            <option>Psychiatrist</option>
            <option>Life Coach</option>
        </select>

        <label style="margin-top:15px;">Session Format</label>
        <select id="sessionType">
            <option value="Online">Online</option>
            <option value="In-Person">In-Person</option>
            <option value="Anonymous">Anonymous</option>
        </select>

        <label style="margin-top:15px;">Date</label>
        <input type="date" id="sessionDate">

        <label style="margin-top:15px;">Time</label>
        <input type="time" id="sessionTime">

        <br><br>
        <button class="btn" onclick="saveAppointment()">Save Session</button>
        <button class="btn" style="background:#ccc; color:black;" onclick="closeModal()">Cancel</button>
    </div>
</div>

<script>
let appointments = JSON.parse(localStorage.getItem("appointments")) || [];

/* MODAL CONTROLS */
function openModal() {
    document.getElementById("modalBackground").style.display = "flex";
}
function closeModal() {
    document.getElementById("modalBackground").style.display = "none";
}

/* SAVE APPOINTMENT */
function saveAppointment() {
    const type = document.getElementById("proType").value;
    const format = document.getElementById("sessionType").value;
    const date = document.getElementById("sessionDate").value;
    const time = document.getElementById("sessionTime").value;

    if (!date || !time) {
        alert("Please choose a date and time.");
        return;
    }

    const appt = {
        type,
        format,
        date,
        time,
        timestamp: new Date(date + " " + time).getTime()
    };

    appointments.push(appt);
    localStorage.setItem("appointments", JSON.stringify(appointments));

    closeModal();
    loadAppointments();
}

/* LOAD APPOINTMENTS */
function loadAppointments() {
    const list = document.getElementById("appointmentsList");
    list.innerHTML = "";

    if (appointments.length === 0) {
        document.getElementById("emptyState").style.display = "block";
        return;
    } else {
        document.getElementById("emptyState").style.display = "none";
    }

    // Determine completed vs upcoming
    const now = Date.now();
    let upcoming = 0, completed = 0;

    appointments.sort((a,b) => a.timestamp - b.timestamp);

    appointments.forEach(a => {
        const isCompleted = a.timestamp < now;
        if (isCompleted) completed++; else upcoming++;

        list.innerHTML += `
        <div class="appointment-card">
            <div class="appt-date">${a.date} at ${a.time}</div>
            <div class="appt-type">${a.type} â€” ${a.format}</div>
            <div class="${isCompleted ? 'status-completed' : 'status-upcoming'}">
                ${isCompleted ? 'Completed' : 'Upcoming'}
            </div>
        </div>`;
    });

    document.getElementById("totalSessions").innerText = appointments.length;
    document.getElementById("upcomingSessions").innerText = upcoming;
    document.getElementById("completedSessions").innerText = completed;
}

loadAppointments();
</script>

</body>
</html>
